(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var a=n.getElementsByTagName("script");if(a.length)for(var c=a.length-1;c>-1&&!e;)e=a[c--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})();const e=t.p+"a1835039ca5c16d4eece2db9392177b0.svg";function n(){return JSON.parse(localStorage.getItem("recentSearch"))??[]}const a=n();async function c(t){const r=document.querySelector(".info"),i=document.querySelector(".history");try{const l=await async function(t){const e=`https://api.openweathermap.org/data/2.5/weather?units=metric&lang=ru&q=${t}&appid=cd35692496444ae52ba1a576e23c1d5c`,n=await fetch(e);return await n.json()}(t);!function(t,n){const a=`https://static-maps.yandex.ru/v1?apikey=ce3d2607-7277-4a80-945e-e03352ae7dbd&l=map&ll=${n.coord.lon},${n.coord.lat}&z=10`,c=new Date;t.innerHTML=`\n\n      <div class = "block data">\n          <div class = "location">\n             <img src = ${e} alt ="images pin" class = "img-pin"/> \n             <h1>${n.name}</h1>\n             \n      </div>\n      <div class="description"> \n          <p class="date">${c.toLocaleDateString("ru-RU")}</p>\n          <p class="weather-text">${n.weather[0].main} - ${n.weather[0].description}</p>\n          </div>\n          <div class="box-image"><img class="icon-weather" src="https://openweathermap.org/img/wn/${n.weather[0].icon}@2x.png" alt="Icon weather"></img>\n          <div class="text-temp">${n.main.temp}°C</div>\n          </div>\n\n          <class="block"><image id="map" src="${a}" /></div>\n`}(r,l),function(t){const e=n();e.length>=10&&e.shift(),e.includes(t)||(e.push(t),localStorage.setItem("recentSearch",JSON.stringify(e)))}(t),s=a,(o=i).innerHTML="\n    <h2>История поиска</h2>\n  ",s.forEach((t=>{const e=document.createElement("a");e.innerText=t,e.setAttribute("href","#"),e.setAttribute("class","cityLink");const n=document.createElement("p");n.setAttribute("class","link-text"),n.appendChild(e),o.appendChild(n)})),document.querySelectorAll("a").forEach((t=>{t.addEventListener("click",(async e=>{e.preventDefault();const n=t.innerText;await c(n)}))}))}catch(t){console.error({getAndDisplayWeatherError:t}),r.innerHTML="Кажется, такого города не существует"}var o,s}!async function(t){document.getElementById("app").innerHTML='\n\n  <header class = "header info"></header>\n\n    <nav class="cities block">\n    \n      <form>\n        <input name="cityName" class="input-form" required autofocus placeholder="Введите город" />\n        <button class="button-form" type="submit">Искать</button>\n      </form>\n    \n      <section class="history block"></section>\n    </nav>\n  ';const e=document.querySelector(".input-form");document.querySelector("form").addEventListener("submit",(async t=>{t.preventDefault(),c(e.value),e.value=""}));const n=await async function(){const t=await fetch("https://get.geojs.io/v1/ip/geo.json");return(await t.json()).city}();await c(n)}()})();